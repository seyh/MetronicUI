<div id="DeviceResourceTbl" class="col-lg-6 col-xs-12 col-sm-12">
    <div class="portlet light ">
        <div class="portlet-title">
            <div class="caption" style="width: 100%; border-bottom: 1px solid #eee; margin-bottom: 15px;">
                <i class="fa fa-server"></i>
                <span class="caption-subject bold uppercase" style="display:block; float:left; font-size: 14px;">DEVICE RESOURCE STATISTICS </span>
                <span class="caption-helper" style="display:block; float:right; font-size: 12px; margin-top:3px;">Last updated time: 12/08/2017 20:00 </span>
            </div>
            <div class="portlet-body">
                <table class="table table-striped table-bordered table-hover dt-responsive" width="100" id="sample_1">
                    <thead>
                        <tr>
                            <th class="all">NE Category</th>
                            <th class="all">Quantity</th>
                            <th class="all" style="width:1px;text-align: center;">Percentage</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <i class="fa fa-arrow-circle-right" style="color:#5C9BD1;margin-right:3px"></i>
                                <a href="">Switch</a>
                            </td>
                            <td>
                                <div class="status-number" style="text-align:center; font-size:12px; margin-top:3px"><span data-bind="text: Switch()"></span></div>
                            </td>
                            <td>
                                <div class="status-number" style="text-align:center; font-size:12px; margin-top:3px"><span data-bind="text: SwitchPercentage().toFixed(2)"></span>%</div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <i class="fa fa-arrow-circle-right" style="color:#5C9BD1;margin-right:3px"></i>
                                <a href="">Access Point</a>
                            </td>
                            <td>
                                <div class="status-number" style="text-align:center; font-size:12px; margin-top:3px"><span data-bind="text: Access_Point()"></span></div>
                            </td>
                            <td>
                                <div class="status-number" style="text-align:center; font-size:12px; margin-top:3px"><span data-bind="text: Access_PointPercentage().toFixed(2)"></span>%</div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <i class="fa fa-arrow-circle-right" style="color:#5C9BD1;margin-right:3px"></i>
                                <a href="">Access Controller</a>
                            </td>
                            <td>
                                <div class="status-number" style="text-align:center; font-size:12px; margin-top:3px"><span data-bind="text: Access_Controller()"></span></div>
                            </td>
                            <td>
                                <div class="status-number" style="text-align:center; font-size:12px; margin-top:3px"><span data-bind="text: Access_ControllerPercentage().toFixed(2)"></span>%</div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <i class="fa fa-arrow-circle-right" style="color:#5C9BD1;margin-right:3px"></i>
                                <a href="">Computer</a>
                            </td>
                            <td>
                                <div class="status-number" style="text-align:center; font-size:12px; margin-top:3px"><span data-bind="text: Computer()"></span></div>
                            </td>
                            <td>
                                <div class="status-number" style="text-align:center; font-size:12px; margin-top:3px"><span data-bind="text: ComputerPercentage().toFixed(2)"></span>%</div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <i class="fa fa-arrow-circle-right" style="color:#5C9BD1;margin-right:3px"></i>
                                <a href="">Unmanaged</a>
                            </td>
                            <td>
                                <div class="status-number" style="text-align:center; font-size:12px; margin-top:3px"><span data-bind="text: Unmanaged()"></span></div>
                            </td>
                            <td>
                                <div class="status-number" style="text-align:center; font-size:12px; margin-top:3px"><span data-bind="text: UnmanagedPercentage().toFixed(2)"></span>%</div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <i class="fa fa-arrow-circle-right" style="color:#5C9BD1;margin-right:3px"></i>
                                <a href="">Linux</a>
                            </td>
                            <td>
                                <div class="status-number" style="text-align:center; font-size:12px; margin-top:3px"><span data-bind="text: Linux()"></span></div>
                            </td>
                            <td>
                                <div class="status-number" style="text-align:center; font-size:12px; margin-top:3px"><span data-bind="text: LinuxPercentage().toFixed(2)"></span>%</div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <i class="fa fa-arrow-circle-right" style="color:#5C9BD1;margin-right:3px"></i>
                                <a href="">Router</a>
                            </td>
                            <td>
                                <div class="status-number" style="text-align:center; font-size:12px; margin-top:3px"><span data-bind="text: Router()"></span></div>
                            </td>
                            <td>
                                <div class="status-number" style="text-align:center; font-size:12px; margin-top:3px"><span data-bind="text: RouterPercentage().toFixed(2)"></span>%</div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<script src="../assets/global/plugins/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function () {
        /*
        var device = {
            'Switch': 1,
            'Access_Point': 2,
            'Access_Controller': 1,
            'Computer': 1,
            'Unmanaged': 1,
            'Linux': 1,
            'Router': 1
        }
        */

        var DeviceTypeViewModel = {
            Switch: ko.observable(),
            Access_Point: ko.observable(),
            Access_Controller: ko.observable(),
            Computer: ko.observable(),
            Unmanaged: ko.observable(),
            Linux: ko.observable(),
            Router: ko.observable()
        }

        $.ajax({
            url: "http://217.78.97.240:8081/data/dashboard/device",
            success: function (deviceDetail) {
                DeviceTypeViewModel = ko.mapping.fromJS(deviceDetail, {}, DeviceTypeViewModel);
            }
        });

        //ko.mapping.fromJS(device, {}, DeviceTypeViewModel);
        DeviceTypeViewModel.LastUpdate = ko.observable(moment().format('DD/MM/YYYY HH:mm'));
        DeviceTypeViewModel.Total = ko.computed(function () { return this.Switch() + this.Access_Point() + this.Access_Controller() + this.Computer() + this.Unmanaged() + this.Linux() + this.Router() }, DeviceTypeViewModel);
        DeviceTypeViewModel.SwitchPercentage = ko.computed(function () { return (this.Switch() / DeviceTypeViewModel.Total()) * 100 }, DeviceTypeViewModel);
        DeviceTypeViewModel.Access_PointPercentage = ko.computed(function () { return (this.Access_Point() / DeviceTypeViewModel.Total()) * 100 }, DeviceTypeViewModel);
        DeviceTypeViewModel.Access_ControllerPercentage = ko.computed(function () { return (this.Access_Controller() / DeviceTypeViewModel.Total()) * 100 }, DeviceTypeViewModel);
        DeviceTypeViewModel.ComputerPercentage = ko.computed(function () { return (this.Computer() / DeviceTypeViewModel.Total()) * 100 }, DeviceTypeViewModel);
        DeviceTypeViewModel.UnmanagedPercentage = ko.computed(function () { return (this.Unmanaged() / DeviceTypeViewModel.Total()) * 100 }, DeviceTypeViewModel);
        DeviceTypeViewModel.LinuxPercentage = ko.computed(function () { return (this.Linux() / DeviceTypeViewModel.Total()) * 100 }, DeviceTypeViewModel);
        DeviceTypeViewModel.RouterPercentage = ko.computed(function () { return (this.Router() / DeviceTypeViewModel.Total()) * 100 }, DeviceTypeViewModel);
        ko.applyBindings(DeviceTypeViewModel, document.getElementById('DeviceResourceTbl'));
        console.log(DeviceTypeViewModel.RouterPercentage());
    });
</script>
